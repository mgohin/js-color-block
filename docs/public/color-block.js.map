{"version":3,"file":"color-block.js","sources":["../lib/src/configuration.js","../lib/src/template.js","../lib/src/color-parser.js","../lib/src/clipboard.js","../lib/src/color-block.js","../lib/src/color-after-text-attribute.js","../lib/src/color-block-wc.js","../lib/index.js"],"sourcesContent":["/**\n * Global configuration object with default values.\n *\n * You can override anything you want.\n * Just be sure to respect 'contracts' of each value.\n *\n * I'm a lazy dev, I did not check if you passed a function or a different type.\n *\n * @type {{clipboard: {validColorTitle: (function(*): string), invalidColorTitle: (function(*): string)}}}\n */\nwindow.ColorBlockConfiguration = {\n    /**\n     * clipboard messages\n     */\n    clipboard: {\n        /**\n         * title to display on the color block when the {@code value} is valid\n         * @param value {string} valid css color value\n         * @return {string} message to display\n         */\n        validColorTitle: (value) => `click to copy value ${value}`,\n        /**\n         * title to display on the color block when the {@code value} is invalid\n         * @param value {string} invalid value\n         * @return {string} message to display\n         */\n        invalidColorTitle: (value) => `${value} is an invalid color - click to copy value`\n    }\n}\n","export const getTemplate = () => {\n    const template = document.createElement('template');\n    template.innerHTML = `\n        <style>\n        \n        :host {\n            display: inline-block;\n        }\n        \n        .color-block {\n          position: relative;\n          display: inline-block;\n          width: 10px;\n          height: 10px;\n          line-height: 10px;\n          border: 1px solid #444;\n        }\n        \n        .color-block .color {\n            display: block;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 10px;\n            height: 10px;\n        }\n        \n        .color-block.copy::after {\n          display: block;\n          position: absolute;\n          top: 0;\n          left: 0;\n          opacity: 0;\n          \n          width: 10px;\n          height: 10px;\n          line-height: 10px;\n          text-align: center;\n          \n          animation-duration: .5s;\n          animation-name: botToTop;\n        }\n        \n        .color-block.copy-success::after {\n          content: '\\\\2713';\n          font-size: 16px;\n          color: green;\n        }\n        \n        .color-block.copy-failed::after {\n          content: '\\\\00D7';\n          font-size: 16px;\n          color: red;\n        }\n        \n        @keyframes botToTop  {\n           0% {\n              top:0;\n              opacity: 0;\n           }\n           \n           50% {\n            opacity: 1;\n           }\n           \n           100% {\n              top:-200%;\n              opacity: 0;\n           }\n        \n        }\n        \n        .color-block .color.invalid {\n            position: relative;\n        }\n        \n        .color-block .color.invalid::before,\n        .color-block .color.invalid::after {\n            position: absolute;\n            content: '';\n            width: 100%;\n            top: 50%;\n            height: 1px;\n            background-color: red;\n        }\n        \n        .color-block .color.invalid::before {\n            transform: rotate(45deg);\n        }\n        \n        .color-block .color.invalid::after {\n            transform: rotate(-45deg);\n        }\n        </style>\n        <span class=\"color-block\">\n            <span class=\"color\"></span>\n            <span class=\"copy\"></span>\n        </span>\n        <span class=\"color-text\"></span>\n        `;\n\n    return template;\n};\n","/**\n * Builder to get a color parser.\n * This is the entrypoint to create a ColorParser.\n *\n * @example\n * ColorParserBuilder\n *    .ifValid(value => checkIfValidValue(value))\n *    .ifInvalid(value => parseValidValue(value));\n *\n * Note: Multiple private classes are used to force the\n * developer to set ifValid and ifInvalid callbacks.\n */\nexport class ColorParserBuilder {\n    static ifValid(validCb) {\n        return new ColorParserBuilderIfInvalid(validCb);\n    }\n}\n\n/**\n * Builder for ifInvalid callback\n */\nclass ColorParserBuilderIfInvalid {\n    _validCb;\n\n    constructor(validCb) {\n        this._validCb = validCb;\n    }\n\n    ifInvalid(invalidCb) {\n        return new ColorParser(this._validCb, invalidCb);\n    }\n}\n\n/**\n * Color parser\n */\nclass ColorParser {\n    _validCb;\n    _invalidCb;\n    parsers = [ColorParserHandler.CssVar(), ColorParserHandler.OtherCssColors()];\n\n    constructor(validCb, invalidCb) {\n        this._validCb = validCb;\n        this._invalidCb = invalidCb;\n    }\n\n    /**\n     * Iterate through {@link parsers} to get a parser that\n     * can parse correctly the {@code value}.\n     *\n     * @param value {string} string to parse as a CSS color\n     */\n    parse(value) {\n        const parser = this.parsers.find(parser => parser.handle(value));\n\n        if (parser) {\n            this._validCb(parser.format(value));\n        } else {\n            this._invalidCb(value);\n        }\n    }\n}\n\n/**\n * Represents a specific parser.\n *\n * You can define your own.\n * It predefines some parsers :\n * - {@link CssVar}\n * - {@link OtherCssColors}\n */\nclass ColorParserHandler {\n    _handleCb;\n    _parseCb;\n\n    constructor(handleCb, parseCb) {\n        this._handleCb = handleCb;\n        this._parseCb = parseCb;\n    }\n\n    /**\n     * Can this parser handle the {@code value} ?\n     *\n     * @param value {string} value to parse\n     * @return {boolean} true if the {@code value} car be formatted\n     */\n    handle(value) {\n        return this._handleCb(value);\n    }\n\n    /**\n     * Format the {@code value}\n     *\n     * @param value {string} value to format\n     * @return {string} formatted value\n     */\n    format(value) {\n        return this._parseCb(value);\n    }\n\n    /**\n     * Parser to handle css var color\n     *\n     * @example\n     * --my-custom-color\n     *\n     * @return {ColorParserHandler} the parser\n     */\n    static CssVar() {\n        return new ColorParserHandler(\n            value => typeof value === 'string' && value.trim().startsWith('--'),\n            value => `var(${value.trim()})`\n        );\n    }\n\n    /**\n     * Parser to handle css colors\n     *\n     * @example\n     * #AA66DD\n     * blue\n     * hsl(9,100%,64%)\n     * rgba(255,99,71,0.5)\n     *\n     * @return {ColorParserHandler} the parser\n     */\n    static OtherCssColors() {\n        return new ColorParserHandler(\n            value => typeof value === 'string' && CSS.supports('color', value.trim()),\n            value => value.trim()\n        );\n    }\n}\n","/**\n * Handler for clipboard copy on a {@link ColorBlock}\n */\nexport class CopyToClipboard {\n\n    _colorBlockEl;\n    _clickListener;\n\n    /**\n     * @constructor\n     * @param colorBlock {ColorBlock} ColorBlock to attach the copy interaction\n     */\n    constructor(colorBlock) {\n        this._colorBlockEl = colorBlock.getElement();\n    }\n\n    /**\n     * Set 'valid' title on the block and bind the copy interaction\n     * @param value {string} valid value to copy\n     */\n    bindValid(value) {\n        this._colorBlockEl.setAttribute('title', ColorBlockConfiguration.clipboard.validColorTitle(value));\n        this._bind(value);\n    }\n\n    /**\n     * Set 'invalid' title on the block and bind the copy interaction\n     * @param value {string} valid value to copy\n     */\n    bindInvalid(value) {\n        this._colorBlockEl.setAttribute('title', ColorBlockConfiguration.clipboard.invalidColorTitle(value));\n        this._bind(value);\n    }\n\n    /**\n     * Remove bound listener to clean things up\n     */\n    unbind() {\n        if (this._clickListener) {\n            this._colorBlockEl.removeEventListener('click', this._clickListener);\n            this._clickListener = null;\n        }\n    }\n\n    _bind(value) {\n        this._clickListener = () => this._copyToClipBoard(value);\n        this._colorBlockEl.addEventListener('click', this._clickListener);\n    }\n\n    _clearCopyState() {\n        this._colorBlockEl.classList.remove('copy-success');\n        this._colorBlockEl.classList.remove('copy-failed');\n    }\n\n    _copySuccess() {\n        this._newCopyState('success');\n    }\n\n    _copyFailed() {\n        this._newCopyState('failed');\n    }\n\n    _newCopyState(state) {\n        this._clearCopyState();\n        this._colorBlockEl.classList.add('copy');\n        this._colorBlockEl.classList.add('copy-' + state);\n        setTimeout(() => {\n            this._colorBlockEl.classList.remove('copy');\n            this._colorBlockEl.classList.remove('copy-' + state);\n        }, 500);\n    }\n\n    _copyToClipBoard(color) {\n        navigator.clipboard.writeText(color)\n            .then(() => {\n                this._copySuccess();\n            }, () => {\n                this._copyFailed();\n            });\n    }\n}\n","import {ColorParserBuilder} from './color-parser';\nimport {CopyToClipboard} from './clipboard';\n\n/**\n * Represents the color block itself\n * with its color parser and interactions\n */\nexport class ColorBlock {\n    _htmlEl;\n    _colorEl;\n    _copyToClipboard;\n    _colorParser;\n\n    constructor(htmlEl) {\n        this._htmlEl = htmlEl;\n        this._colorEl = htmlEl.querySelector('.color-block .color');\n\n        this._copyToClipboard = new CopyToClipboard(this);\n        this._colorParser = ColorParserBuilder\n            .ifValid(this._setValidColor.bind(this))\n            .ifInvalid(this._setInvalidColor.bind(this));\n    }\n\n    getElement() {\n        return this._htmlEl;\n    }\n\n    setColor(value) {\n        this._colorParser.parse(value);\n    }\n\n    disconnect() {\n        this._copyToClipboard.unbind();\n    }\n\n    _setValidColor(color) {\n        this._colorEl.style.backgroundColor = color;\n        this._copyToClipboard.bindValid(color);\n    }\n\n    _setInvalidColor(value) {\n        this._colorEl.classList.add('invalid');\n        this._copyToClipboard.bindInvalid(value);\n    }\n}\n","/**\n * Handler for input property 'color-after-text'\n * that can be used on the web component to\n * move the color block after the text.\n *\n * By default, the color block is before the text, sexier that way.\n */\nexport class ColorAfterTextAttribute {\n    static ATTR_COLOR_AFTER_TEXT = 'color-after-text';\n\n    _shadowRoot;\n    _colorBlockEl;\n\n    constructor(shadowRoot, colorBlock) {\n        this._shadowRoot = shadowRoot;\n        this._colorBlockEl = colorBlock.getElement();\n    }\n\n    /**\n     * Looks like an attribute changed, so check it\n     * and move the color block in consequences.\n     *\n     * @param name {string} changed attribute name\n     * @param value {string} attribute's value\n     */\n    onAttributeChanged(name, value) {\n        if (!this._handle(name)) {\n            return;\n        }\n\n        if (value === 'true') {\n            this._shadowRoot.appendChild(this._colorBlockEl);\n        } else {\n            this._shadowRoot.prepend(this._colorBlockEl);\n        }\n    }\n\n    _handle(name) {\n        return name === ColorAfterTextAttribute.ATTR_COLOR_AFTER_TEXT;\n    }\n}\n","import './configuration';\n\nimport {getTemplate} from './template';\nimport {ColorBlock} from './color-block';\nimport {ColorAfterTextAttribute} from './color-after-text-attribute.js';\n\n/**\n * Represents the web component itself.\n *\n * One input is available :\n *  - color-after-text : if 'true', it'll move the color block after the text.\n *      By default, the color block is before the text\n */\nexport class ColorBlockWebComponent extends HTMLElement {\n\n    static get observedAttributes() {\n        return [ColorAfterTextAttribute.ATTR_COLOR_AFTER_TEXT];\n    }\n\n    _colorTextEl;\n    _colorBlock;\n\n    _colorAfterTextAttribute;\n\n    constructor() {\n        super();\n\n        this._createTemplate();\n        this._bindElements();\n\n        this._colorAfterTextAttribute = new ColorAfterTextAttribute(this.shadowRoot, this._colorBlock);\n    }\n\n    _createTemplate() {\n        this.attachShadow({mode: 'open'});\n        this.shadowRoot.appendChild(getTemplate().content.cloneNode(true));\n    }\n\n    _bindElements() {\n        this._colorTextEl = this.shadowRoot.querySelector('.color-text');\n        this._colorBlock = new ColorBlock(this.shadowRoot.querySelector('.color-block'));\n    }\n\n    connectedCallback() {\n        setTimeout(() => {\n            const contentAsString = this.innerHTML;\n            this._colorTextEl.innerText = contentAsString;\n            this._colorBlock.setColor(contentAsString);\n        });\n    }\n\n    disconnectedCallback() {\n        this._colorBlock.disconnect();\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n        this._colorAfterTextAttribute.onAttributeChanged(name, newValue);\n    }\n}\n","import {ColorBlockWebComponent} from './src/color-block-wc.js';\n\ncustomElements.define('color-block', ColorBlockWebComponent);\n"],"names":["window","ColorBlockConfiguration","clipboard","validColorTitle","value","invalidColorTitle","getTemplate","template","document","createElement","innerHTML","ColorParserBuilder","ifValid","validCb","ColorParserBuilderIfInvalid","_validCb","constructor","ifInvalid","invalidCb","ColorParser","_invalidCb","parsers","ColorParserHandler","CssVar","OtherCssColors","parse","parser","find","handle","format","_handleCb","_parseCb","handleCb","parseCb","trim","startsWith","CSS","supports","CopyToClipboard","_colorBlockEl","_clickListener","colorBlock","getElement","bindValid","setAttribute","_bind","bindInvalid","unbind","removeEventListener","_copyToClipBoard","addEventListener","_clearCopyState","classList","remove","_copySuccess","_newCopyState","_copyFailed","state","add","setTimeout","color","navigator","writeText","then","ColorBlock","_htmlEl","_colorEl","_copyToClipboard","_colorParser","htmlEl","querySelector","_setValidColor","bind","_setInvalidColor","setColor","disconnect","style","backgroundColor","ColorAfterTextAttribute","ATTR_COLOR_AFTER_TEXT","_shadowRoot","shadowRoot","onAttributeChanged","name","_handle","appendChild","prepend","ColorBlockWebComponent","HTMLElement","observedAttributes","_colorTextEl","_colorBlock","_colorAfterTextAttribute","_createTemplate","_bindElements","attachShadow","mode","content","cloneNode","connectedCallback","contentAsString","innerText","disconnectedCallback","attributeChangedCallback","oldValue","newValue","customElements","define"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,MAAM,CAACC,uBAAP,GAAiC;AAC7B;AACJ;AACA;AACIC,EAAAA,SAAS,EAAE;AACP;AACR;AACA;AACA;AACA;AACQC,IAAAA,eAAe,EAAGC,KAAD,IAAY,CAAA,oBAAA,EAAsBA,KAAM,CANlD,CAAA;;AAOP;AACR;AACA;AACA;AACA;AACQC,IAAAA,iBAAiB,EAAGD,KAAD,IAAY,CAAA,EAAEA,KAAM,CAAA,0CAAA,CAAA;AAZhC,GAAA;AAJkB,CAAjC;;ACVO,MAAME,WAAW,GAAG,MAAM;AAC7B,EAAA,MAAMC,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAjB,CAAA;EACAF,QAAQ,CAACG,SAAT,GAAsB,CAAA;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAjGI,CAAA,CAAA;AAmGA,EAAA,OAAOH,QAAP,CAAA;AACH,CAtGM;;ACAP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMI,kBAAN,CAAyB;EACd,OAAPC,OAAO,CAACC,OAAD,EAAU;AACpB,IAAA,OAAO,IAAIC,2BAAJ,CAAgCD,OAAhC,CAAP,CAAA;AACH,GAAA;;AAH2B,CAAA;AAMhC;AACA;A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"}